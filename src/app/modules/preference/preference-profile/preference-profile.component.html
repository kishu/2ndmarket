  <div app-header class="sticky safe-top z-30"></div>
  <div class="w-full max-w-xl mx-auto">
  <div
    class="mt-5"
    *ngIf="profile$ | async as profile">
    <div class="w-32 h-32 mx-auto overflow-hidden rounded-full">
      <img [src]="profile.photoURL || 'https://via.placeholder.com/150'" class="w-full h-full" alt="">
    </div>
    <div>
      <div>{{ profile.displayName }}</div>
      <div>{{ profile.email }}</div>
    </div>
    <div>
      <a routerLink="/preference/groups">그룹설정</a>
    </div>
  </div>

  <br><br>
  <h2>알림</h2>

  <ul *ngIf="noticeList$ | async as noticeList">
    <li *ngFor="let notice of noticeList">
      <ng-container *ngIf="notice.goodsId | fsDocument:'goods' | async as goods">
        <ng-container *ngIf="notice.goodsCommentId | fsDocument: 'goodsComments' | async as goodsComment">
          <a [routerLink]="['/goods', notice.goodsId]" [fragment]="'goodsComments/' + notice.goodsCommentId" (click)="onClickNotice($event, notice)">
            <img [src]="goods.images[0]" width="40"> {{ goods.name }}의 댓글 /
            {{ goodsComment.body }} /
            {{ notice.created | fsTimestamp | formatDistanceToNow }}
          </a>
        </ng-container>
      </ng-container>
    </li>
  </ul>

  <br><br>

  <ul>
    <li><button type="button" (click)="onClickGoodsListType('write')">등록한 상품</button></li>
    <li><button type="button" (click)="onClickGoodsListType('favorite')">좋아요 상품</button></li>
  </ul>

  <br><br>

  <ng-container [ngSwitch]="goodsListType$ | async">
    <ng-container *ngSwitchCase="'write'">
      <h3>등록한 상품</h3>
      <ul class="grid grid-cols-3 md:grid-cols-4 gap-1 p-1" *ngIf="writeGoodsList$ | async as goodsList">
        <li *ngFor="let goods of goodsList">
          <ng-container *ngTemplateOutlet="goodsTemplate; context: {goods: goods}"></ng-container>
        </li>
      </ul>
    </ng-container>
    <ng-container *ngSwitchCase="'favorite'">
      <h3>관심 상품</h3>
      <ul class="grid grid-cols-3 gap-1 p-1" *ngIf="goodsFavoriteList$ | async as goodsFavoriteList">
        <li *ngFor="let goodsFavorite of goodsFavoriteList">
          <ng-container *ngIf="goodsFavorite.goodsId | fsDocument:'goods' | async as goods">
            <ng-container *ngTemplateOutlet="goodsTemplate; context: {goods: goods}"></ng-container>
          </ng-container>
        </li>
      </ul>
    </ng-container>
  </ng-container>
</div>


<ng-template #goodsTemplate let-goods="goods" class="goodsItem">
  <div>
    <div class="relative square">
      <a [routerLink]="['/groups', goods.groupId, 'goods', goods.id]">
        <img
          [src]="goods.images[0]"
          class="absolute l-0 t-0 w-full h-full object-cover"
          alt="{{ goods.name }}">
      </a>
    </div>
  </div>
  <!-- <div class="relative md:w-7/12 px-4 py-3 md:pb-16">
    <a [routerLink]="['/goods', goods.id]">
      {{ goods.name }} / {{ goods.price }} / 댓글: {{ goods.commentsCnt }} / 좋아요: {{ goods.favoritesCnt }} / {{ goods.created | fsTimestamp | formatDistanceToNow }}
    </a>
  </div> -->
</ng-template>
