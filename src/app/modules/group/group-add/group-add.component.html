<h2> 그룹 추가 </h2>

<ng-container *ngIf="(step$ | async) === 'email'">
  <form
    [formGroup]="emailForm"
    (ngSubmit)="onEmailSubmit()">
    <div>
      <label for="account">이메일 주소</label>
      <input
        id="account"
        name="account"
        type="text"
        formControlName="account"
        required>
      @
      <label for="domain" style="display:none">도메인</label>
      <select
        id="domain"
        name="domain"
        formControlName="domain"
        required>
        <option value="">도메인 선택</option>
        <option *ngFor="let domain of (domains$ | async)" [value]="domain">{{ domain }}</option>
      </select>
    </div>
    <div *ngIf="accountCtl.invalid && (accountCtl.dirty || accountCtl.touched)">
      이메일 계정을 입력하세요.
    </div>
    <div *ngIf="domainCtl.invalid && (domainCtl.dirty || domainCtl.touched)">
      도메인을 선택하세요.
    </div>
    <div>
      <button
        class="btn"
        type="submit"
        [disabled]="!emailForm.valid">
        {{ submitting ? '보내는 중...' : '이메일 보내기' }}
      </button>
    </div>
  </form>
</ng-container>

<ng-container *ngIf="(step$ | async) === 'verify'">
  <form
    [formGroup]="verifyForm"
    (ngSubmit)="onVerifySubmit()">
    <div>
      <label for="code">인증번호</label>
      <input
        id="code"
        name="code"
        type="number"
        formControlName="code"
        required>
      <app-limit-timer [time]="1000 * 60 * 3" (timeover)="onTimeoverLimitTimer()"></app-limit-timer>
    </div>
    <div *ngIf="codeCtl.invalid && (codeCtl.dirty || codeCtl.touched)">
      인증번호를 입력하세요.
    </div>
    <div *ngIf="verifyForm.errors?.incorrect">
      인증번호를 정확하게 입력하세요.
    </div>
    <div *ngIf="verifyForm.errors?.timeover">
      입력시간이 지났습니다.
    </div>
    <div>
      <button
        type="submit"
        [disabled]="!verifyForm.valid">
        인증
      </button>
      <button
        type="button"
        (click)="onClickRetry()">
        이메일 다시 보내기
      </button>
    </div>
  </form>
</ng-container>
