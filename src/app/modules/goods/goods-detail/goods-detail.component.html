<ng-container *ngIf="goods$ | async as goods">
  <div class="goodsDetail bg-white w-full max-w-xl mx-auto">
    <ul>
      <ng-container *ngFor="let src of goods.images; first as isFirst">
        <li *ngIf="isFirst"><img [src]="src" alt=""></li>
      </ng-container>
    </ul>
    <div class="px-4 py-3">
      <h2 class="goodsName text-lg">{{ goods.name }}</h2>
      <button type="button" (click)="onClickFavorite()">좋아요<span *ngIf="favorited$ | async">(했음)</span></button>
      <span>{{ goods.favoritesCnt }}</span>
      <div class="my-3"><strong class="font-bold">{{ goods.price | number:'2.' }}</strong>원</div>
      <p class="leading-tight">{{ goods.memo }}</p>
      <div class="my-3 text-sm">
        <span class="inline-block py-1 px-3 mr-1 bg-gray-500 text-white"># {{ goods.condition }}</span>
        <span class="inline-block py-1 px-3 mr-1 bg-gray-500 text-white"># {{ goods.purchased }}</span>
      </div>
      <ul class="goods-images">
        <ng-container *ngFor="let src of goods.images; first as isFirst">
          <li class="relative border border-white">
            <div class="attachImage"><img [src]="src" class="image" alt=""></div>
          </li>
        </ng-container>
      </ul>
      <div>{{ goods.contact }}</div>
      <ng-container *ngIf="permission$ | async as p">
        <a [routerLink]="['edit']" skipLocationChange>수정</a> |
        <button type="button" (click)="onClickDelete()">삭제</button> |
        <button type="button" (click)="onClickSoldOut()">{{ goods.soldOut ? '판매됨' : '판매완료하기' }}</button>
        <span *ngIf="goods.soldOut">{{ goods.soldOut | fsTimestamp | formatDistanceToNow }}</span>
      </ng-container>
    </div>
  </div>
  <div class="comment-wrap">
    <app-goods-comment-list [goods]="goods"></app-goods-comment-list>
    <app-goods-comment-form [goodsId]="goods.id"></app-goods-comment-form>
  </div>
</ng-container>

<ng-container *ngIf="empty$ | async">
  <div>상품이 없습니다.</div>
</ng-container>
